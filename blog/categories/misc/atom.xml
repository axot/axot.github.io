<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Misc | axot github page]]></title>
  <link href="https://axot.github.io/blog/categories/misc/atom.xml" rel="self"/>
  <link href="https://axot.github.io/"/>
  <updated>2014-05-20T01:15:35+09:00</updated>
  <id>https://axot.github.io/</id>
  <author>
    <name><![CDATA[axot]]></name>
    <email><![CDATA[axot[at]msn.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[How to resolve _rb_Digest_MD5_Finish error in Ruby 1.9.x]]></title>
    <link href="https://axot.github.io/blog/2012/05/01/how-to-resolve-_rb_digest_md5_finish-error-in-ruby-1-9-3/"/>
    <updated>2012-05-01T03:50:50+09:00</updated>
    <id>https://axot.github.io/blog/2012/05/01/how-to-resolve-_rb_digest_md5_finish-error-in-ruby-1-9-3</id>
    <content type="html"><![CDATA[<p>When I am setting up Metasploit for Mac OSX, ruby 1.9.3 throw out a _rb_Digest_MD5_Finish error.<br />
It seems only happend when you use RVM to manage rubies.<br />
<a id="more"></a><a id="more-36"></a><br />
The Makefile in each subdirectory of $HOME/.rvm/src/ruby-1.9.*/ext/digest need be patched.<br />
I don't know how to use RVM to install a custom Ruby version, so I made a simple shell script to do that.</p>


<p>ruby1.9.x_patch.sh(test passed on OSX 10.7.3 x86_64 version):<br />
[code lang="bash"]<br />
#!/bin/sh</p>


<p>cd $HOME/.rvm/src/ruby-1.9.*/ext/digest/sha1<br />
sed -i -e 's/sha1init.c sha1ossl.c$/sha1init.c sha1ossl.c sha1.c/g; s/sha1init.o sha1ossl.o$/sha1init.o sha1ossl.o sha1.o/g' Makefile<br />
make clean<br />
make</p>


<p>cd ../sha2<br />
sed -i -e 's/sha2init.c sha2ossl.c$/sha2init.c sha2ossl.c sha2.c/g; s/sha2init.o sha2ossl.o$/sha2init.o sha2ossl.o sha2.o/g' Makefile<br />
make clean<br />
make</p>


<p>cd ../md5<br />
sed -i -e 's/md5init.c md5ossl.c$/md5init.c md5ossl.c md5.c/g; s/md5init.o md5ossl.o$/md5init.o md5ossl.o md5.o/g' Makefile<br />
make clean<br />
make</p>


<p>cd ../rmd160<br />
sed -i -e 's/rmd160init.c rmd160ossl.c$/rmd160init.c rmd160ossl.c rmd160.c/g; s/rmd160init.o rmd160ossl.o$/rmd160init.o rmd160ossl.o rmd160.o/g' Makefile<br />
make clean<br />
make</p>


<p>echo Patching...<br />
cp ../../../.ext/x86_64-darwin*/digest/*.bundle ../../../../../rubies/ruby-1.9.*/lib/ruby/1.9.*/x86_64-darwin*/digest/<br />
echo Done<br />
[/code]</p>


<p>Usage example:<br />
[code lang="bash"]<br />
rvm cleanup all<br />
rvm reinstall 1.9.3<br />
rvm reload<br />
curl -L http://www.axot.org/wp-content/uploads/2012/05/ruby1.9.x_patch.sh | sh<br />
rvm use 1.9.3<br />
# test something whatever u want to<br />
# for metasploit:<br />
# msfrpcd -P password -U username<br />
[/code]</p>


<p>Downloads:<br />
<a href='http://www.axot.org/wp-content/uploads/2012/05/ruby1.9.x_patch.sh'>ruby1.9.x_patch</a></p>

]]></content>
  </entry>
  
</feed>
